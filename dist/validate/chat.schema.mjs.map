{"version":3,"sources":["../../src/validate/chat.schema.ts"],"sourcesContent":["import { JSONSchema7, JSONSchema7Definition } from 'json-schema';\nimport { v4 } from 'uuid';\n\nconst isNotEmpty = (...propertyNames: string[]): JSONSchema7 => {\n  const properties = {};\n  propertyNames.forEach(\n    (property) =>\n      (properties[property] = {\n        minLength: 1,\n        description: `The \"${property}\" cannot be empty`,\n      }),\n  );\n  return {\n    if: {\n      propertyNames: {\n        enum: [...propertyNames],\n      },\n    },\n    then: { properties },\n  };\n};\n\nconst numberDefinition: JSONSchema7Definition = {\n  type: 'string',\n  description: 'Invalid format',\n};\n\nexport const whatsappNumberSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    numbers: {\n      type: 'array',\n      minItems: 1,\n      uniqueItems: true,\n      items: {\n        type: 'string',\n        description: '\"numbers\" must be an array of numeric strings',\n      },\n    },\n  },\n};\n\nexport const readMessageSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    readMessages: {\n      type: 'array',\n      minItems: 1,\n      uniqueItems: true,\n      items: {\n        properties: {\n          id: { type: 'string' },\n          fromMe: { type: 'boolean', enum: [true, false] },\n          remoteJid: { type: 'string' },\n        },\n        required: ['id', 'fromMe', 'remoteJid'],\n        ...isNotEmpty('id', 'remoteJid'),\n      },\n    },\n  },\n  required: ['readMessages'],\n};\n\nexport const archiveChatSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    chat: { type: 'string' },\n    lastMessage: {\n      type: 'object',\n      properties: {\n        key: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            remoteJid: { type: 'string' },\n            fromMe: { type: 'boolean', enum: [true, false] },\n          },\n          required: ['id', 'fromMe', 'remoteJid'],\n          ...isNotEmpty('id', 'remoteJid'),\n        },\n        messageTimestamp: { type: 'integer', minLength: 1 },\n      },\n      required: ['key'],\n      ...isNotEmpty('messageTimestamp'),\n    },\n    archive: { type: 'boolean', enum: [true, false] },\n  },\n  required: ['archive'],\n};\n\nexport const markChatUnreadSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    chat: { type: 'string' },\n    lastMessage: {\n      type: 'object',\n      properties: {\n        key: {\n          type: 'object',\n          properties: {\n            id: { type: 'string' },\n            remoteJid: { type: 'string' },\n            fromMe: { type: 'boolean', enum: [true, false] },\n          },\n          required: ['id', 'fromMe', 'remoteJid'],\n          ...isNotEmpty('id', 'remoteJid'),\n        },\n        messageTimestamp: { type: 'integer', minLength: 1 },\n      },\n      required: ['key'],\n      ...isNotEmpty('messageTimestamp'),\n    },\n  },\n  required: ['lastMessage'],\n};\n\nexport const deleteMessageSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    id: { type: 'string' },\n    fromMe: { type: 'boolean', enum: [true, false] },\n    remoteJid: { type: 'string' },\n    participant: { type: 'string' },\n  },\n  required: ['id', 'fromMe', 'remoteJid'],\n  ...isNotEmpty('id', 'remoteJid', 'participant'),\n};\n\nexport const profilePictureSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    number: { type: 'string' },\n    picture: { type: 'string' },\n  },\n};\n\nexport const updateMessageSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    number: { type: 'string' },\n    text: { type: 'string' },\n    key: {\n      type: 'object',\n      properties: {\n        id: { type: 'string' },\n        remoteJid: { type: 'string' },\n        fromMe: { type: 'boolean', enum: [true, false] },\n      },\n      required: ['id', 'fromMe', 'remoteJid'],\n      ...isNotEmpty('id', 'remoteJid'),\n    },\n  },\n  ...isNotEmpty('number', 'text', 'key'),\n};\n\nexport const presenceSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    number: { ...numberDefinition },\n    delay: { type: 'number' },\n    presence: {\n      type: 'string',\n      enum: ['unavailable', 'available', 'composing', 'recording', 'paused'],\n    },\n  },\n  required: ['number', 'presence', 'delay'],\n};\n\nexport const blockUserSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    number: { type: 'string' },\n    status: { type: 'string', enum: ['block', 'unblock'] },\n  },\n  required: ['number', 'status'],\n  ...isNotEmpty('number', 'status'),\n};\n\nexport const contactValidateSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    where: {\n      type: 'object',\n      properties: {\n        _id: { type: 'string', minLength: 1 },\n        pushName: { type: 'string', minLength: 1 },\n        id: { type: 'string', minLength: 1 },\n        remoteJid: { type: 'string', minLength: 1 },\n      },\n      ...isNotEmpty('_id', 'id', 'pushName', 'remoteJid'),\n    },\n  },\n};\n\nexport const messageValidateSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    where: {\n      type: 'object',\n      properties: {\n        _id: { type: 'string', minLength: 1 },\n        key: {\n          type: 'object',\n          if: {\n            propertyNames: {\n              enum: ['fromMe', 'remoteJid', 'id'],\n            },\n          },\n          then: {\n            properties: {\n              remoteJid: {\n                type: 'string',\n                minLength: 1,\n                description: 'The property cannot be empty',\n              },\n              id: {\n                type: 'string',\n                minLength: 1,\n                description: 'The property cannot be empty',\n              },\n              fromMe: { type: 'boolean', enum: [true, false] },\n            },\n          },\n        },\n        message: { type: 'object' },\n      },\n      ...isNotEmpty('_id'),\n    },\n    limit: { type: 'integer' },\n  },\n};\n\nexport const messageUpSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    where: {\n      type: 'object',\n      properties: {\n        _id: { type: 'string' },\n        remoteJid: { type: 'string' },\n        id: { type: 'string' },\n        fromMe: { type: 'boolean', enum: [true, false] },\n        participant: { type: 'string' },\n        status: {\n          type: 'string',\n          enum: ['ERROR', 'PENDING', 'SERVER_ACK', 'DELIVERY_ACK', 'READ', 'PLAYED'],\n        },\n      },\n      ...isNotEmpty('_id', 'remoteJid', 'id', 'status'),\n    },\n    limit: { type: 'integer' },\n  },\n};\n\nexport const privacySettingsSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    readreceipts: { type: 'string', enum: ['all', 'none'] },\n    profile: {\n      type: 'string',\n      enum: ['all', 'contacts', 'contact_blacklist', 'none'],\n    },\n    status: {\n      type: 'string',\n      enum: ['all', 'contacts', 'contact_blacklist', 'none'],\n    },\n    online: { type: 'string', enum: ['all', 'match_last_seen'] },\n    last: { type: 'string', enum: ['all', 'contacts', 'contact_blacklist', 'none'] },\n    groupadd: {\n      type: 'string',\n      enum: ['all', 'contacts', 'contact_blacklist', 'none'],\n    },\n  },\n  required: ['readreceipts', 'profile', 'status', 'online', 'last', 'groupadd'],\n  ...isNotEmpty('readreceipts', 'profile', 'status', 'online', 'last', 'groupadd'),\n};\n\nexport const profileNameSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    name: { type: 'string' },\n  },\n  ...isNotEmpty('name'),\n};\n\nexport const profileStatusSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    status: { type: 'string' },\n  },\n  ...isNotEmpty('status'),\n};\n\nexport const profileSchema: JSONSchema7 = {\n  type: 'object',\n  properties: {\n    wuid: { type: 'string' },\n    name: { type: 'string' },\n    picture: { type: 'string' },\n    status: { type: 'string' },\n    isBusiness: { type: 'boolean' },\n  },\n};\n"],"mappings":"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","names":["v4","isNotEmpty","__name","propertyNames","properties","forEach","property","minLength","description","if","enum","then","numberDefinition","type","whatsappNumberSchema","$id","v4","numbers","minItems","uniqueItems","items","readMessageSchema","readMessages","id","fromMe","remoteJid","required","archiveChatSchema","chat","lastMessage","key","messageTimestamp","archive","markChatUnreadSchema","deleteMessageSchema","participant","profilePictureSchema","number","picture","updateMessageSchema","text","presenceSchema","delay","presence","blockUserSchema","status","contactValidateSchema","where","_id","pushName","messageValidateSchema","message","limit","messageUpSchema","privacySettingsSchema","readreceipts","profile","online","last","groupadd","profileNameSchema","name","profileStatusSchema","profileSchema","wuid","isBusiness"]}