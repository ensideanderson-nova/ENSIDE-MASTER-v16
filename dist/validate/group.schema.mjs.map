{"version":3,"sources":["../../src/validate/group.schema.ts"],"sourcesContent":["import { JSONSchema7 } from 'json-schema';\nimport { v4 } from 'uuid';\n\nconst isNotEmpty = (...propertyNames: string[]): JSONSchema7 => {\n  const properties = {};\n  propertyNames.forEach(\n    (property) =>\n      (properties[property] = {\n        minLength: 1,\n        description: `The \"${property}\" cannot be empty`,\n      }),\n  );\n  return {\n    if: {\n      propertyNames: {\n        enum: [...propertyNames],\n      },\n    },\n    then: { properties },\n  };\n};\n\nexport const createGroupSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    subject: { type: 'string' },\n    description: { type: 'string' },\n    profilePicture: { type: 'string' },\n    promoteParticipants: { type: 'boolean', enum: [true, false] },\n    participants: {\n      type: 'array',\n      minItems: 1,\n      uniqueItems: true,\n      items: {\n        type: 'string',\n        minLength: 10,\n        pattern: '\\\\d+',\n        description: '\"participants\" must be an array of numeric strings',\n      },\n    },\n  },\n  required: ['subject', 'participants'],\n  ...isNotEmpty('subject', 'description', 'profilePicture'),\n};\n\nexport const groupJidSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string', pattern: '^[\\\\d-]+@g.us$' },\n  },\n  required: ['groupJid'],\n  ...isNotEmpty('groupJid'),\n};\n\nexport const getParticipantsSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    getParticipants: { type: 'string', enum: ['true', 'false'] },\n  },\n  required: ['getParticipants'],\n  ...isNotEmpty('getParticipants'),\n};\n\nexport const groupSendInviteSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string' },\n    description: { type: 'string' },\n    numbers: {\n      type: 'array',\n      minItems: 1,\n      uniqueItems: true,\n      items: {\n        type: 'string',\n        minLength: 10,\n        pattern: '\\\\d+',\n        description: '\"numbers\" must be an array of numeric strings',\n      },\n    },\n  },\n  required: ['groupJid', 'description', 'numbers'],\n  ...isNotEmpty('groupJid', 'description', 'numbers'),\n};\n\nexport const groupInviteSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    inviteCode: { type: 'string', pattern: '^[a-zA-Z0-9]{22}$' },\n  },\n  required: ['inviteCode'],\n  ...isNotEmpty('inviteCode'),\n};\n\nexport const AcceptGroupInviteSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    inviteCode: { type: 'string', pattern: '^[a-zA-Z0-9]{22}$' },\n  },\n  required: ['inviteCode'],\n  ...isNotEmpty('inviteCode'),\n};\n\nexport const updateParticipantsSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string' },\n    action: {\n      type: 'string',\n      enum: ['add', 'remove', 'promote', 'demote'],\n    },\n    participants: {\n      type: 'array',\n      minItems: 1,\n      uniqueItems: true,\n      items: {\n        type: 'string',\n        minLength: 10,\n        pattern: '\\\\d+',\n        description: '\"participants\" must be an array of numeric strings',\n      },\n    },\n  },\n  required: ['groupJid', 'action', 'participants'],\n  ...isNotEmpty('groupJid', 'action'),\n};\n\nexport const updateSettingsSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string' },\n    action: {\n      type: 'string',\n      enum: ['announcement', 'not_announcement', 'locked', 'unlocked'],\n    },\n  },\n  required: ['groupJid', 'action'],\n  ...isNotEmpty('groupJid', 'action'),\n};\n\nexport const toggleEphemeralSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string' },\n    expiration: {\n      type: 'number',\n      enum: [0, 86400, 604800, 7776000],\n    },\n  },\n  required: ['groupJid', 'expiration'],\n  ...isNotEmpty('groupJid', 'expiration'),\n};\n\nexport const updateGroupPictureSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string' },\n    image: { type: 'string' },\n  },\n  required: ['groupJid', 'image'],\n  ...isNotEmpty('groupJid', 'image'),\n};\n\nexport const updateGroupSubjectSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string' },\n    subject: { type: 'string' },\n  },\n  required: ['groupJid', 'subject'],\n  ...isNotEmpty('groupJid', 'subject'),\n};\n\nexport const updateGroupDescriptionSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    groupJid: { type: 'string' },\n    description: { type: 'string' },\n  },\n  required: ['groupJid', 'description'],\n  ...isNotEmpty('groupJid', 'description'),\n};\n"],"mappings":"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","names":["v4","isNotEmpty","__name","propertyNames","properties","forEach","property","minLength","description","if","enum","then","createGroupSchema","$id","v4","type","subject","profilePicture","promoteParticipants","participants","minItems","uniqueItems","items","pattern","required","groupJidSchema","groupJid","getParticipantsSchema","getParticipants","groupSendInviteSchema","numbers","groupInviteSchema","inviteCode","AcceptGroupInviteSchema","updateParticipantsSchema","action","updateSettingsSchema","toggleEphemeralSchema","expiration","updateGroupPictureSchema","image","updateGroupSubjectSchema","updateGroupDescriptionSchema"]}