var E=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var o=Object.prototype.hasOwnProperty;var _=(e,t,s)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var r=(e,t)=>E(e,"name",{value:t,configurable:!0});var m=(e,t)=>{for(var s in t)E(e,s,{get:t[s],enumerable:!0})},u=(e,t,s,T)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of h(t))!o.call(e,n)&&n!==s&&E(e,n,{get:()=>t[n],enumerable:!(T=A(t,n))||T.enumerable});return e};var I=e=>u(E({},"__esModule",{value:!0}),e);var i=(e,t,s)=>_(e,typeof t!="symbol"?t+"":t,s);var N={};m(N,{EventController:()=>a});module.exports=I(N);var S=class S{constructor(t,s,T,n){i(this,"prismaRepository");i(this,"waMonitor");i(this,"integrationStatus");i(this,"integrationName");this.prisma=t,this.monitor=s,this.status=T,this.name=n}set prisma(t){this.prismaRepository=t}get prisma(){return this.prismaRepository}set monitor(t){this.waMonitor=t}get monitor(){return this.waMonitor}set name(t){this.integrationName=t}get name(){return this.integrationName}set status(t){this.integrationStatus=t}get status(){return this.integrationStatus}async set(t,s){if(this.status)return s[this.name]?.enabled?s[this.name].events.length===0&&(s[this.name].events=S.events):s[this.name].events=[],this.prisma[this.name].upsert({where:{instanceId:this.monitor.waInstances[t].instanceId},update:{enabled:s[this.name]?.enabled,events:s[this.name].events},create:{enabled:s[this.name]?.enabled,events:s[this.name].events,instanceId:this.monitor.waInstances[t].instanceId}})}async get(t){if(!this.status)return;if(this.monitor.waInstances[t]===void 0)return null;let s=await this.prisma[this.name].findUnique({where:{instanceId:this.monitor.waInstances[t].instanceId}});return s||null}};r(S,"EventController"),i(S,"events",["APPLICATION_STARTUP","QRCODE_UPDATED","MESSAGES_SET","MESSAGES_UPSERT","MESSAGES_EDITED","MESSAGES_UPDATE","MESSAGES_DELETE","SEND_MESSAGE","SEND_MESSAGE_UPDATE","CONTACTS_SET","CONTACTS_UPSERT","CONTACTS_UPDATE","PRESENCE_UPDATE","CHATS_SET","CHATS_UPSERT","CHATS_UPDATE","CHATS_DELETE","GROUPS_UPSERT","GROUP_UPDATE","GROUP_PARTICIPANTS_UPDATE","CONNECTION_UPDATE","LABELS_EDIT","LABELS_ASSOCIATION","CALL","TYPEBOT_START","TYPEBOT_CHANGE_STATUS","REMOVE_INSTANCE","LOGOUT_INSTANCE","INSTANCE_CREATE","INSTANCE_DELETE","STATUS_INSTANCE"]);var a=S;0&&(module.exports={EventController});
//# sourceMappingURL=event.controller.js.map