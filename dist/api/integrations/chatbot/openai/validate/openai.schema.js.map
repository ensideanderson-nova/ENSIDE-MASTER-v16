{"version":3,"sources":["../../../../../../src/api/integrations/chatbot/openai/validate/openai.schema.ts"],"sourcesContent":["import { JSONSchema7 } from 'json-schema';\nimport { v4 } from 'uuid';\n\nconst isNotEmpty = (...propertyNames: string[]): JSONSchema7 => {\n  const properties = {};\n  propertyNames.forEach(\n    (property) =>\n      (properties[property] = {\n        minLength: 1,\n        description: `The \"${property}\" cannot be empty`,\n      }),\n  );\n  return {\n    if: {\n      propertyNames: {\n        enum: [...propertyNames],\n      },\n    },\n    then: { properties },\n  };\n};\n\nexport const openaiSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    enabled: { type: 'boolean' },\n    description: { type: 'string' },\n    openaiCredsId: { type: 'string' },\n    botType: { type: 'string', enum: ['assistant', 'chatCompletion'] },\n    assistantId: { type: 'string' },\n    functionUrl: { type: 'string' },\n    model: { type: 'string' },\n    systemMessages: { type: 'array', items: { type: 'string' } },\n    assistantMessages: { type: 'array', items: { type: 'string' } },\n    userMessages: { type: 'array', items: { type: 'string' } },\n    maxTokens: { type: 'integer' },\n    triggerType: { type: 'string', enum: ['all', 'keyword', 'none', 'advanced'] },\n    triggerOperator: { type: 'string', enum: ['equals', 'contains', 'startsWith', 'endsWith', 'regex'] },\n    triggerValue: { type: 'string' },\n    expire: { type: 'integer' },\n    keywordFinish: { type: 'string' },\n    delayMessage: { type: 'integer' },\n    unknownMessage: { type: 'string' },\n    listeningFromMe: { type: 'boolean' },\n    stopBotFromMe: { type: 'boolean' },\n    keepOpen: { type: 'boolean' },\n    debounceTime: { type: 'integer' },\n    ignoreJids: { type: 'array', items: { type: 'string' } },\n  },\n  required: ['enabled', 'openaiCredsId', 'botType', 'triggerType'],\n  ...isNotEmpty('enabled', 'openaiCredsId', 'botType', 'triggerType'),\n};\n\nexport const openaiCredsSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    name: { type: 'string' },\n    apiKey: { type: 'string' },\n  },\n  required: ['name', 'apiKey'],\n  ...isNotEmpty('name', 'apiKey'),\n};\n\nexport const openaiStatusSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    remoteJid: { type: 'string' },\n    status: { type: 'string', enum: ['opened', 'closed', 'paused', 'delete'] },\n  },\n  required: ['remoteJid', 'status'],\n  ...isNotEmpty('remoteJid', 'status'),\n};\n\nexport const openaiSettingSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    openaiCredsId: { type: 'string' },\n    expire: { type: 'integer' },\n    keywordFinish: { type: 'string' },\n    delayMessage: { type: 'integer' },\n    unknownMessage: { type: 'string' },\n    listeningFromMe: { type: 'boolean' },\n    stopBotFromMe: { type: 'boolean' },\n    keepOpen: { type: 'boolean' },\n    debounceTime: { type: 'integer' },\n    speechToText: { type: 'boolean' },\n    ignoreJids: { type: 'array', items: { type: 'string' } },\n    openaiIdFallback: { type: 'string' },\n  },\n  required: [\n    'openaiCredsId',\n    'expire',\n    'keywordFinish',\n    'delayMessage',\n    'unknownMessage',\n    'listeningFromMe',\n    'stopBotFromMe',\n    'keepOpen',\n    'debounceTime',\n    'ignoreJids',\n  ],\n  ...isNotEmpty(\n    'openaiCredsId',\n    'expire',\n    'keywordFinish',\n    'delayMessage',\n    'unknownMessage',\n    'listeningFromMe',\n    'stopBotFromMe',\n    'keepOpen',\n    'debounceTime',\n    'ignoreJids',\n  ),\n};\n\nexport const openaiIgnoreJidSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    remoteJid: { type: 'string' },\n    action: { type: 'string', enum: ['add', 'remove'] },\n  },\n  required: ['remoteJid', 'action'],\n  ...isNotEmpty('remoteJid', 'action'),\n};\n"],"mappings":"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","names":["openai_schema_exports","__export","openaiCredsSchema","openaiIgnoreJidSchema","openaiSchema","openaiSettingSchema","openaiStatusSchema","__toCommonJS","import_uuid","isNotEmpty","__name","propertyNames","properties","forEach","property","minLength","description","if","enum","then","openaiSchema","$id","v4","type","enabled","openaiCredsId","botType","assistantId","functionUrl","model","systemMessages","items","assistantMessages","userMessages","maxTokens","triggerType","triggerOperator","triggerValue","expire","keywordFinish","delayMessage","unknownMessage","listeningFromMe","stopBotFromMe","keepOpen","debounceTime","ignoreJids","required","openaiCredsSchema","name","apiKey","openaiStatusSchema","remoteJid","status","openaiSettingSchema","speechToText","openaiIdFallback","openaiIgnoreJidSchema","action"]}