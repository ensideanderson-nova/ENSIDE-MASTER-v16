{"version":3,"sources":["../../../../../../src/api/integrations/chatbot/typebot/validate/typebot.schema.ts"],"sourcesContent":["import { JSONSchema7 } from 'json-schema';\nimport { v4 } from 'uuid';\n\nconst isNotEmpty = (...propertyNames: string[]): JSONSchema7 => {\n  const properties = {};\n  propertyNames.forEach(\n    (property) =>\n      (properties[property] = {\n        minLength: 1,\n        description: `The \"${property}\" cannot be empty`,\n      }),\n  );\n  return {\n    if: {\n      propertyNames: {\n        enum: [...propertyNames],\n      },\n    },\n    then: { properties },\n  };\n};\n\nexport const typebotSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    enabled: { type: 'boolean' },\n    description: { type: 'string' },\n    url: { type: 'string' },\n    typebot: { type: 'string' },\n    triggerType: { type: 'string', enum: ['all', 'keyword', 'none', 'advanced'] },\n    triggerOperator: { type: 'string', enum: ['equals', 'contains', 'startsWith', 'endsWith', 'regex'] },\n    triggerValue: { type: 'string' },\n    expire: { type: 'integer' },\n    keywordFinish: { type: 'string' },\n    delayMessage: { type: 'integer' },\n    unknownMessage: { type: 'string' },\n    listeningFromMe: { type: 'boolean' },\n    stopBotFromMe: { type: 'boolean' },\n    ignoreJids: { type: 'array', items: { type: 'string' } },\n  },\n  required: ['enabled', 'url', 'typebot', 'triggerType'],\n  ...isNotEmpty('enabled', 'url', 'typebot', 'triggerType'),\n};\n\nexport const typebotStatusSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    remoteJid: { type: 'string' },\n    status: { type: 'string', enum: ['opened', 'closed', 'paused', 'delete'] },\n  },\n  required: ['remoteJid', 'status'],\n  ...isNotEmpty('remoteJid', 'status'),\n};\n\nexport const typebotStartSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    remoteJid: { type: 'string' },\n    url: { type: 'string' },\n    typebot: { type: 'string' },\n  },\n  required: ['remoteJid', 'url', 'typebot'],\n  ...isNotEmpty('remoteJid', 'url', 'typebot'),\n};\n\nexport const typebotSettingSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    expire: { type: 'integer' },\n    keywordFinish: { type: 'string' },\n    delayMessage: { type: 'integer' },\n    unknownMessage: { type: 'string' },\n    listeningFromMe: { type: 'boolean' },\n    stopBotFromMe: { type: 'boolean' },\n    keepOpen: { type: 'boolean' },\n    debounceTime: { type: 'integer' },\n    typebotIdFallback: { type: 'string' },\n    ignoreJids: { type: 'array', items: { type: 'string' } },\n  },\n  required: ['expire', 'keywordFinish', 'delayMessage', 'unknownMessage', 'listeningFromMe', 'stopBotFromMe'],\n  ...isNotEmpty('expire', 'keywordFinish', 'delayMessage', 'unknownMessage', 'listeningFromMe', 'stopBotFromMe'),\n};\n\nexport const typebotIgnoreJidSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    remoteJid: { type: 'string' },\n    action: { type: 'string', enum: ['add', 'remove'] },\n  },\n  required: ['remoteJid', 'action'],\n  ...isNotEmpty('remoteJid', 'action'),\n};\n"],"mappings":"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","names":["typebot_schema_exports","__export","typebotIgnoreJidSchema","typebotSchema","typebotSettingSchema","typebotStartSchema","typebotStatusSchema","__toCommonJS","import_uuid","isNotEmpty","__name","propertyNames","properties","forEach","property","minLength","description","if","enum","then","typebotSchema","$id","v4","type","enabled","url","typebot","triggerType","triggerOperator","triggerValue","expire","keywordFinish","delayMessage","unknownMessage","listeningFromMe","stopBotFromMe","ignoreJids","items","required","typebotStatusSchema","remoteJid","status","typebotStartSchema","typebotSettingSchema","keepOpen","debounceTime","typebotIdFallback","typebotIgnoreJidSchema","action"]}