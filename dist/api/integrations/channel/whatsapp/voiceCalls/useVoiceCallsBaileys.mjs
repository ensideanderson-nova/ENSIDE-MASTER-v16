var u=Object.defineProperty;var f=(i,r)=>u(i,"name",{value:r,configurable:!0});import{io as d}from"socket.io-client";var l="close",h=f(async(i,r,p,e)=>{l=p??"close";let c=d("https://devices.wavoip.com/baileys",{transports:["websocket"],path:`/${i}/websocket`});return c.on("connect",()=>{e&&console.log("[*] - Wavoip connected",c.id),c.emit("init",r.authState.creds.me,r.authState.creds.account,l)}),c.on("disconnect",()=>{e&&console.log("[*] - Wavoip disconnect")}),c.on("connect_error",o=>{c.active?e&&console.log("[*] - Wavoip connection error temporary failure, the socket will automatically try to reconnect",o):e&&console.log("[*] - Wavoip connection error",o.message)}),c.on("onWhatsApp",async(o,n)=>{try{let s=await r.onWhatsApp(o);n(s),e&&console.log("[*] Success on call onWhatsApp function",s,o)}catch(s){e&&console.error("[*] Error on call onWhatsApp function",s)}}),c.on("profilePictureUrl",async(o,n,s,a)=>{try{let t=await r.profilePictureUrl(o,n,s);a(t),e&&console.log("[*] Success on call profilePictureUrl function",t)}catch(t){e&&console.error("[*] Error on call profilePictureUrl function",t)}}),c.on("assertSessions",async(o,n,s)=>{try{let a=await r.assertSessions(o);s(a),e&&console.log("[*] Success on call assertSessions function",a)}catch(a){e&&console.error("[*] Error on call assertSessions function",a)}}),c.on("createParticipantNodes",async(o,n,s,a)=>{try{let t=await r.createParticipantNodes(o,n,s);a(t,!0),e&&console.log("[*] Success on call createParticipantNodes function",t)}catch(t){e&&console.error("[*] Error on call createParticipantNodes function",t)}}),c.on("getUSyncDevices",async(o,n,s,a)=>{try{let t=await r.getUSyncDevices(o,n,s);a(t),e&&console.log("[*] Success on call getUSyncDevices function",t)}catch(t){e&&console.error("[*] Error on call getUSyncDevices function",t)}}),c.on("generateMessageTag",async o=>{try{let n=await r.generateMessageTag();o(n),e&&console.log("[*] Success on call generateMessageTag function",n)}catch(n){e&&console.error("[*] Error on call generateMessageTag function",n)}}),c.on("sendNode",async(o,n)=>{try{console.log("sendNode",JSON.stringify(o));let s=await r.sendNode(o);n(!0),e&&console.log("[*] Success on call sendNode function",s)}catch(s){e&&console.error("[*] Error on call sendNode function",s)}}),c.on("signalRepository:decryptMessage",async(o,n,s,a)=>{try{let t=await r.signalRepository.decryptMessage({jid:o,type:n,ciphertext:s});a(t),e&&console.log("[*] Success on call signalRepository:decryptMessage function",t)}catch(t){e&&console.error("[*] Error on call signalRepository:decryptMessage function",t)}}),r.ev.on("connection.update",o=>{let{connection:n}=o;n&&(l=n,c.timeout(1e3).emit("connection.update:status",r.authState.creds.me,r.authState.creds.account,n)),o.qr&&c.timeout(1e3).emit("connection.update:qr",o.qr)}),r.ws.on("CB:call",o=>{e&&console.log("[*] Signling received"),c.volatile.timeout(1e3).emit("CB:call",o)}),r.ws.on("CB:ack,class:call",o=>{e&&console.log("[*] Signling ack received"),c.volatile.timeout(1e3).emit("CB:ack,class:call",o)}),c},"useVoiceCallsBaileys");export{h as useVoiceCallsBaileys};
//# sourceMappingURL=useVoiceCallsBaileys.mjs.map