var f=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var u=(i,e)=>f(i,"name",{value:e,configurable:!0});var m=(i,e)=>{for(var l in e)f(i,l,{get:e[l],enumerable:!0})},v=(i,e,l,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of S(e))!h.call(i,c)&&c!==l&&f(i,c,{get:()=>e[c],enumerable:!(n=y(e,c))||n.enumerable});return i};var w=i=>v(f({},"__esModule",{value:!0}),i);var E={};m(E,{useVoiceCallsBaileys:()=>N});module.exports=w(E);var d=require("socket.io-client");var p="close",N=u(async(i,e,l,n)=>{p=l??"close";let c=(0,d.io)("https://devices.wavoip.com/baileys",{transports:["websocket"],path:`/${i}/websocket`});return c.on("connect",()=>{n&&console.log("[*] - Wavoip connected",c.id),c.emit("init",e.authState.creds.me,e.authState.creds.account,p)}),c.on("disconnect",()=>{n&&console.log("[*] - Wavoip disconnect")}),c.on("connect_error",o=>{c.active?n&&console.log("[*] - Wavoip connection error temporary failure, the socket will automatically try to reconnect",o):n&&console.log("[*] - Wavoip connection error",o.message)}),c.on("onWhatsApp",async(o,t)=>{try{let r=await e.onWhatsApp(o);t(r),n&&console.log("[*] Success on call onWhatsApp function",r,o)}catch(r){n&&console.error("[*] Error on call onWhatsApp function",r)}}),c.on("profilePictureUrl",async(o,t,r,a)=>{try{let s=await e.profilePictureUrl(o,t,r);a(s),n&&console.log("[*] Success on call profilePictureUrl function",s)}catch(s){n&&console.error("[*] Error on call profilePictureUrl function",s)}}),c.on("assertSessions",async(o,t,r)=>{try{let a=await e.assertSessions(o);r(a),n&&console.log("[*] Success on call assertSessions function",a)}catch(a){n&&console.error("[*] Error on call assertSessions function",a)}}),c.on("createParticipantNodes",async(o,t,r,a)=>{try{let s=await e.createParticipantNodes(o,t,r);a(s,!0),n&&console.log("[*] Success on call createParticipantNodes function",s)}catch(s){n&&console.error("[*] Error on call createParticipantNodes function",s)}}),c.on("getUSyncDevices",async(o,t,r,a)=>{try{let s=await e.getUSyncDevices(o,t,r);a(s),n&&console.log("[*] Success on call getUSyncDevices function",s)}catch(s){n&&console.error("[*] Error on call getUSyncDevices function",s)}}),c.on("generateMessageTag",async o=>{try{let t=await e.generateMessageTag();o(t),n&&console.log("[*] Success on call generateMessageTag function",t)}catch(t){n&&console.error("[*] Error on call generateMessageTag function",t)}}),c.on("sendNode",async(o,t)=>{try{console.log("sendNode",JSON.stringify(o));let r=await e.sendNode(o);t(!0),n&&console.log("[*] Success on call sendNode function",r)}catch(r){n&&console.error("[*] Error on call sendNode function",r)}}),c.on("signalRepository:decryptMessage",async(o,t,r,a)=>{try{let s=await e.signalRepository.decryptMessage({jid:o,type:t,ciphertext:r});a(s),n&&console.log("[*] Success on call signalRepository:decryptMessage function",s)}catch(s){n&&console.error("[*] Error on call signalRepository:decryptMessage function",s)}}),e.ev.on("connection.update",o=>{let{connection:t}=o;t&&(p=t,c.timeout(1e3).emit("connection.update:status",e.authState.creds.me,e.authState.creds.account,t)),o.qr&&c.timeout(1e3).emit("connection.update:qr",o.qr)}),e.ws.on("CB:call",o=>{n&&console.log("[*] Signling received"),c.volatile.timeout(1e3).emit("CB:call",o)}),e.ws.on("CB:ack,class:call",o=>{n&&console.log("[*] Signling ack received"),c.volatile.timeout(1e3).emit("CB:ack,class:call",o)}),c},"useVoiceCallsBaileys");0&&(module.exports={useVoiceCallsBaileys});
//# sourceMappingURL=useVoiceCallsBaileys.js.map