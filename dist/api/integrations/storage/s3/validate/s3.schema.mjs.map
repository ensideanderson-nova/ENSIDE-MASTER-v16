{"version":3,"sources":["../../../../../../src/api/integrations/storage/s3/validate/s3.schema.ts"],"sourcesContent":["import { JSONSchema7 } from 'json-schema';\nimport { v4 } from 'uuid';\n\nconst isNotEmpty = (...propertyNames: string[]): JSONSchema7 => {\n  const properties = {};\n  propertyNames.forEach(\n    (property) =>\n      (properties[property] = {\n        minLength: 1,\n        description: `The \"${property}\" cannot be empty`,\n      }),\n  );\n  return {\n    if: {\n      propertyNames: {\n        enum: [...propertyNames],\n      },\n    },\n    then: { properties },\n  };\n};\n\nexport const s3Schema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    id: { type: 'string' },\n    type: { type: 'string' },\n    messageId: { type: 'integer' },\n  },\n  ...isNotEmpty('id', 'type', 'messageId'),\n};\n\nexport const s3UrlSchema: JSONSchema7 = {\n  $id: v4(),\n  type: 'object',\n  properties: {\n    id: { type: 'string', pattern: '\\\\d+', minLength: 1 },\n    expiry: { type: 'string', pattern: '\\\\d+', minLength: 1 },\n  },\n  ...isNotEmpty('id'),\n  required: ['id'],\n};\n"],"mappings":"+EACA,OAASA,MAAAA,MAAU,OAEnB,IAAMC,EAAaC,EAAA,IAAIC,IAAAA,CACrB,IAAMC,EAAa,CAAC,EACpBD,OAAAA,EAAcE,QACXC,GACEF,EAAWE,CAAAA,EAAY,CACtBC,UAAW,EACXC,YAAa,QAAQF,CAAAA,mBACvB,CAAA,EAEG,CACLG,GAAI,CACFN,cAAe,CACbO,KAAM,IAAIP,EACZ,CACF,EACAQ,KAAM,CAAEP,WAAAA,CAAW,CACrB,CACF,EAjBmB,cAmBNQ,EAAwB,CACnCC,IAAKC,EAAAA,EACLC,KAAM,SACNX,WAAY,CACVY,GAAI,CAAED,KAAM,QAAS,EACrBA,KAAM,CAAEA,KAAM,QAAS,EACvBE,UAAW,CAAEF,KAAM,SAAU,CAC/B,EACA,GAAGd,EAAW,KAAM,OAAQ,WAAA,CAC9B,EAEaiB,EAA2B,CACtCL,IAAKC,EAAAA,EACLC,KAAM,SACNX,WAAY,CACVY,GAAI,CAAED,KAAM,SAAUI,QAAS,OAAQZ,UAAW,CAAE,EACpDa,OAAQ,CAAEL,KAAM,SAAUI,QAAS,OAAQZ,UAAW,CAAE,CAC1D,EACA,GAAGN,EAAW,IAAA,EACdoB,SAAU,CAAC,KACb","names":["v4","isNotEmpty","__name","propertyNames","properties","forEach","property","minLength","description","if","enum","then","s3Schema","$id","v4","type","id","messageId","s3UrlSchema","pattern","expiry","required"]}