var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var u=(t,o)=>a(t,"name",{value:o,configurable:!0});var T=(t,o)=>{for(var r in o)a(t,r,{get:o[r],enumerable:!0})},C=(t,o,r,e)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of _(o))!k.call(t,s)&&s!==r&&a(t,s,{get:()=>o[s],enumerable:!(e=h(o,s))||e.enumerable});return t};var L=t=>C(a({},"__esModule",{value:!0}),t);var g={};T(g,{makeProxyAgent:()=>S,makeProxyAgentUndici:()=>y});module.exports=L(g);var i=require("fetch-socks"),$=require("https-proxy-agent"),f=require("socks-proxy-agent"),m=require("undici");function P(t){let o=new URL(t),r="http:",e="socks:",s="socks5:";switch(o.protocol){case r:return new $.HttpsProxyAgent(o);case e:case s:{let n="";return o.username&&o.password?n=`socks://${o.username}:${o.password}@${o.hostname}:${o.port}`:n=`socks://${o.hostname}:${o.port}`,new f.SocksProxyAgent(n)}default:throw new Error(`Unsupported proxy protocol: ${o.protocol}`)}}u(P,"selectProxyAgent");function S(t){if(typeof t=="string")return P(t);let{host:o,password:r,port:e,protocol:s,username:n}=t,O=`${s}://${o}:${e}`;return n&&r&&(O=`${s}://${n}:${r}@${o}:${e}`),P(O)}u(S,"makeProxyAgent");function y(t){let o,r;if(typeof t=="string")r=new URL(t).protocol.replace(":",""),o=t;else{let{host:p,password:c,port:w,protocol:R,username:l}=t;r=(R||"http").replace(":",""),r==="socks"&&(r="socks5");let d=l&&c?`${l}:${c}@`:"";o=`${r}://${d}${p}:${w}`}r=r.toLowerCase();let e="http",s="https",n="socks4",O="socks5";switch(r){case e:case s:return new m.ProxyAgent(o);case n:case O:{let p=5;n===r&&(p=4);let c=new URL(o);return(0,i.socksDispatcher)({type:p,host:c.hostname,port:Number(c.port),userId:c.username||void 0,password:c.password||void 0})}default:throw new Error(`Unsupported proxy protocol: ${r}`)}}u(y,"makeProxyAgentUndici");0&&(module.exports={makeProxyAgent,makeProxyAgentUndici});
//# sourceMappingURL=makeProxyAgent.js.map