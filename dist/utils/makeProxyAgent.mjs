var f=Object.defineProperty;var a=(r,o)=>f(r,"name",{value:o,configurable:!0});import{socksDispatcher as m}from"fetch-socks";import{HttpsProxyAgent as w}from"https-proxy-agent";import{SocksProxyAgent as R}from"socks-proxy-agent";import{ProxyAgent as d}from"undici";function l(r){let o=new URL(r),t="http:",n="socks:",c="socks5:";switch(o.protocol){case t:return new w(o);case n:case c:{let s="";return o.username&&o.password?s=`socks://${o.username}:${o.password}@${o.hostname}:${o.port}`:s=`socks://${o.hostname}:${o.port}`,new R(s)}default:throw new Error(`Unsupported proxy protocol: ${o.protocol}`)}}a(l,"selectProxyAgent");function L(r){if(typeof r=="string")return l(r);let{host:o,password:t,port:n,protocol:c,username:s}=r,O=`${c}://${o}:${n}`;return s&&t&&(O=`${c}://${s}:${t}@${o}:${n}`),l(O)}a(L,"makeProxyAgent");function S(r){let o,t;if(typeof r=="string")t=new URL(r).protocol.replace(":",""),o=r;else{let{host:p,password:e,port:P,protocol:i,username:u}=r;t=(i||"http").replace(":",""),t==="socks"&&(t="socks5");let $=u&&e?`${u}:${e}@`:"";o=`${t}://${$}${p}:${P}`}t=t.toLowerCase();let n="http",c="https",s="socks4",O="socks5";switch(t){case n:case c:return new d(o);case s:case O:{let p=5;s===t&&(p=4);let e=new URL(o);return m({type:p,host:e.hostname,port:Number(e.port),userId:e.username||void 0,password:e.password||void 0})}default:throw new Error(`Unsupported proxy protocol: ${t}`)}}a(S,"makeProxyAgentUndici");export{L as makeProxyAgent,S as makeProxyAgentUndici};
//# sourceMappingURL=makeProxyAgent.mjs.map